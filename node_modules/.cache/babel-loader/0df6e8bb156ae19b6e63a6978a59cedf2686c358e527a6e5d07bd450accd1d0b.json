{"ast":null,"code":"import _regeneratorRuntime from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useController}from'../../Controller';import reviewClasses from'./reviewClasses';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Review(_ref){var review=_ref.review,user=_ref.user;var _useController=useController(),deleteReview=_useController.deleteReview,updateReview=_useController.updateReview,getAllReviews=_useController.getAllReviews;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState({body:review.body,author:review.author}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];function handleChange(evt){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},evt.target.name,evt.target.value)));}var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return deleteReview(review._id);case 2:case\"end\":return _context.stop();}},_callee);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(evt){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:evt.preventDefault();_context2.prev=1;_context2.next=4;return updateReview(review._id,formData,user);case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](1);setError('Editing Failed - Try Again');case 9:setEditing(false);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[1,6]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){getAllReviews();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:reviewClasses.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between gap-4\",children:[user._id===review.user&&/*#__PURE__*/_jsx(\"p\",{className:reviewClasses.edit,onClick:function onClick(){setEditing(!editing);},children:\"Edit\"}),user._id===review.user&&/*#__PURE__*/_jsx(\"span\",{className:reviewClasses.delete,onClick:handleDelete,children:\"\\u2715\"})]}),editing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:reviewClasses.form,children:[/*#__PURE__*/_jsxs(\"div\",{className:reviewClasses.section,children:[/*#__PURE__*/_jsx(\"label\",{className:reviewClasses.label,htmlFor:\"body\",children:\"Edit Review\"}),/*#__PURE__*/_jsx(\"textarea\",{className:reviewClasses.input,rows:\"5\",cols:\"100\",name:\"body\",placeholder:review.body,value:formData.body,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:reviewClasses.section,children:[/*#__PURE__*/_jsx(\"label\",{className:reviewClasses.label,htmlFor:\"author\",children:\"Author\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",className:reviewClasses.input,placeholder:review.author,value:formData.author,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA0\",error]}),/*#__PURE__*/_jsx(\"button\",{className:reviewClasses.button,type:\"submit\",children:\"Submit Changes\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:review.body}),/*#__PURE__*/_jsx(\"p\",{className:\"self-end italic\",children:review.author})]})]})});}","map":{"version":3,"names":["useState","useEffect","useController","reviewClasses","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Review","_ref","review","user","_useController","deleteReview","updateReview","getAllReviews","_useState","_useState2","_slicedToArray","editing","setEditing","_useState3","body","author","_useState4","formData","setFormData","_useState5","_useState6","error","setError","handleChange","evt","_objectSpread","_defineProperty","target","name","value","handleDelete","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","_id","stop","apply","arguments","handleSubmit","_ref3","_callee2","_callee2$","_context2","preventDefault","t0","_x","children","className","container","edit","onClick","delete","onSubmit","form","section","label","htmlFor","input","rows","cols","placeholder","onChange","type","button"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/components/Review/Review.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useController } from '../../Controller'\n\nimport reviewClasses from './reviewClasses'\n\nexport default function Review({ review, user }) {\n  const { deleteReview, updateReview, getAllReviews } = useController()\n\n  const [editing, setEditing] = useState(false)\n  const [formData, setFormData] = useState({\n    body: review.body,\n    author: review.author,\n  })\n  const [error, setError] = useState('')\n\n  function handleChange(evt) {\n    setFormData({ ...formData, [evt.target.name]: evt.target.value })\n  }\n\n  const handleDelete = async () => {\n    await deleteReview(review._id)\n  }\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault()\n    try {\n      await updateReview(review._id, formData, user)\n    } catch {\n      setError('Editing Failed - Try Again')\n    }\n    setEditing(false)\n  }\n\n  useEffect(() => {\n    getAllReviews()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <>\n      <div className={reviewClasses.container}>\n        <div className=\"flex justify-between gap-4\">\n          {user._id === review.user && (\n            <p\n              className={reviewClasses.edit}\n              onClick={() => {\n                setEditing(!editing)\n              }}\n            >\n              Edit\n            </p>\n          )}\n          {user._id === review.user && (\n            <span className={reviewClasses.delete} onClick={handleDelete}>\n              &#10005;\n            </span>\n          )}\n        </div>\n        {editing ? (\n          <form onSubmit={handleSubmit} className={reviewClasses.form}>\n            <div className={reviewClasses.section}>\n              <label className={reviewClasses.label} htmlFor=\"body\">\n                Edit Review\n              </label>\n              <textarea\n                className={reviewClasses.input}\n                rows=\"5\"\n                cols=\"100\"\n                name=\"body\"\n                placeholder={review.body}\n                value={formData.body}\n                onChange={handleChange}\n              />\n            </div>\n            <div className={reviewClasses.section}>\n              <label className={reviewClasses.label} htmlFor=\"author\">\n                Author\n              </label>\n              <input\n                type=\"text\"\n                name=\"author\"\n                className={reviewClasses.input}\n                placeholder={review.author}\n                value={formData.author}\n                onChange={handleChange}\n              />\n            </div>\n            <p>&nbsp;{error}</p>\n            <button className={reviewClasses.button} type=\"submit\">\n              Submit Changes\n            </button>\n          </form>\n        ) : (\n          <div className=\"flex flex-col\">\n            <p className=\"text-lg\">{review.body}</p>\n            <p className=\"self-end italic\">{review.author}</p>\n          </div>\n        )}\n      </div>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}