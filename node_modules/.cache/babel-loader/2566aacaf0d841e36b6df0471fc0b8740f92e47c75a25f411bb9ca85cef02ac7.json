{"ast":null,"code":"import * as usersAPI from './usersApi';\nexport async function signUp(userData) {\n  // Delete the network request code to the\n  // users-api.js module which will ultimately\n  // return the JWT\n  const token = await usersAPI.signUp(userData);\n  // Persist the token to localStorage\n  localStorage.setItem('token', token);\n  return getUser();\n}\nexport async function login(credentials) {\n  const token = await usersAPI.login(credentials);\n  // Persist the token to localStorage\n  localStorage.setItem('token', token);\n  return getUser();\n}\nexport function getToken() {\n  const token = localStorage.getItem('token');\n  // getItem will return null if no key\n  console.log(token);\n  if (token === null || token === undefined) {\n    console.log('Token is null or undefined');\n    return null;\n  }\n  const payload = JSON.parse(atob(token.split('.')[1]));\n  if (payload.exp < Date.now() / 1000) {\n    // Token has expired\n    localStorage.removeItem('token');\n    return null;\n  }\n  return token;\n}\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\nexport function logOut() {\n  localStorage.removeItem('token');\n}","map":{"version":3,"names":["usersAPI","signUp","userData","token","localStorage","setItem","getUser","login","credentials","getToken","getItem","console","log","undefined","payload","JSON","parse","atob","split","exp","Date","now","removeItem","user","logOut"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/services/usersService.js"],"sourcesContent":["import * as usersAPI from './usersApi'\n\nexport async function signUp(userData) {\n  // Delete the network request code to the\n  // users-api.js module which will ultimately\n  // return the JWT\n  const token = await usersAPI.signUp(userData)\n  // Persist the token to localStorage\n  localStorage.setItem('token', token)\n  return getUser()\n}\n\nexport async function login(credentials) {\n  const token = await usersAPI.login(credentials)\n  // Persist the token to localStorage\n  localStorage.setItem('token', token)\n  return getUser()\n}\n\nexport function getToken() {\n  const token = localStorage.getItem('token')\n  // getItem will return null if no key\n  console.log(token)\n\n  if (token === null || token === undefined) {\n    console.log('Token is null or undefined')\n    return null\n  }\n  const payload = JSON.parse(atob(token.split('.')[1]))\n  if (payload.exp < Date.now() / 1000) {\n    // Token has expired\n    localStorage.removeItem('token')\n    return null\n  }\n  return token\n}\n\nexport function getUser() {\n  const token = getToken()\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null\n}\n\nexport function logOut() {\n  localStorage.removeItem('token')\n}\n"],"mappings":"AAAA,OAAO,KAAKA,QAAQ,MAAM,YAAY;AAEtC,OAAO,eAAeC,MAAMA,CAACC,QAAQ,EAAE;EACrC;EACA;EACA;EACA,MAAMC,KAAK,GAAG,MAAMH,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC;EAC7C;EACAE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;EACpC,OAAOG,OAAO,EAAE;AAClB;AAEA,OAAO,eAAeC,KAAKA,CAACC,WAAW,EAAE;EACvC,MAAML,KAAK,GAAG,MAAMH,QAAQ,CAACO,KAAK,CAACC,WAAW,CAAC;EAC/C;EACAJ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;EACpC,OAAOG,OAAO,EAAE;AAClB;AAEA,OAAO,SAASG,QAAQA,CAAA,EAAG;EACzB,MAAMN,KAAK,GAAGC,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;EAC3C;EACAC,OAAO,CAACC,GAAG,CAACT,KAAK,CAAC;EAElB,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKU,SAAS,EAAE;IACzCF,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IACzC,OAAO,IAAI;EACb;EACA,MAAME,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACd,KAAK,CAACe,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrD,IAAIJ,OAAO,CAACK,GAAG,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAE;IACnC;IACAjB,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;IAChC,OAAO,IAAI;EACb;EACA,OAAOnB,KAAK;AACd;AAEA,OAAO,SAASG,OAAOA,CAAA,EAAG;EACxB,MAAMH,KAAK,GAAGM,QAAQ,EAAE;EACxB,OAAON,KAAK,GAAGY,IAAI,CAACC,KAAK,CAACC,IAAI,CAACd,KAAK,CAACe,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,IAAI,GAAG,IAAI;AAClE;AAEA,OAAO,SAASC,MAAMA,CAAA,EAAG;EACvBpB,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;AAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}