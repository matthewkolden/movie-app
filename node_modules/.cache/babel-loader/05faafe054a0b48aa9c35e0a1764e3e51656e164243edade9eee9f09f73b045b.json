{"ast":null,"code":"import axios from 'axios';\nimport { getToken } from './users-service';\nexport default async function sendRequest(url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  let payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    method\n  };\n  if (payload) {\n    options.headers = {\n      'Content-Type': 'application/json'\n    };\n    options.data = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    // Ensure headers object exists\n    options.headers = options.headers || {};\n    // Add token to an Authorization header\n    // Prefacing with 'Bearer' is recommended in the HTTP specification\n    options.headers.Authorization = `Bearer ${token}`;\n  }\n  try {\n    const response = await axios(url, options);\n    return response.data;\n  } catch (error) {\n    throw new Error('Bad Request');\n  }\n}","map":{"version":3,"names":["axios","getToken","sendRequest","url","method","arguments","length","undefined","payload","options","headers","data","JSON","stringify","token","Authorization","response","error","Error"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/services/sendRequest.js"],"sourcesContent":["import axios from 'axios'\nimport { getToken } from './users-service'\n\nexport default async function sendRequest(url, method = 'GET', payload = null) {\n  const options = { method }\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' }\n    options.data = JSON.stringify(payload)\n  }\n  const token = getToken()\n  if (token) {\n    // Ensure headers object exists\n    options.headers = options.headers || {}\n    // Add token to an Authorization header\n    // Prefacing with 'Bearer' is recommended in the HTTP specification\n    options.headers.Authorization = `Bearer ${token}`\n  }\n  try {\n    const response = await axios(url, options)\n    return response.data\n  } catch (error) {\n    throw new Error('Bad Request')\n  }\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,iBAAiB;AAE1C,eAAe,eAAeC,WAAWA,CAACC,GAAG,EAAkC;EAAA,IAAhCC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAC3E,MAAMI,OAAO,GAAG;IAAEL;EAAO,CAAC;EAC1B,IAAII,OAAO,EAAE;IACXC,OAAO,CAACC,OAAO,GAAG;MAAE,cAAc,EAAE;IAAmB,CAAC;IACxDD,OAAO,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;EACxC;EACA,MAAMM,KAAK,GAAGb,QAAQ,EAAE;EACxB,IAAIa,KAAK,EAAE;IACT;IACAL,OAAO,CAACC,OAAO,GAAGD,OAAO,CAACC,OAAO,IAAI,CAAC,CAAC;IACvC;IACA;IACAD,OAAO,CAACC,OAAO,CAACK,aAAa,GAAI,UAASD,KAAM,EAAC;EACnD;EACA,IAAI;IACF,MAAME,QAAQ,GAAG,MAAMhB,KAAK,CAACG,GAAG,EAAEM,OAAO,CAAC;IAC1C,OAAOO,QAAQ,CAACL,IAAI;EACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,aAAa,CAAC;EAChC;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}