{"ast":null,"code":"import _regeneratorRuntime from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import{useController}from'../../Controller';import{useState,useEffect}from'react';import{Link}from'react-router-dom';import adminPageClasses from'./adminPageClasses';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AdminPage(_ref){_objectDestructuringEmpty(_ref);var _useController=useController(),getMovie=_useController.getMovie,getAllMovies=_useController.getAllMovies,movies=_useController.movies;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var handleInputChange=function handleInputChange(event){setInput(event.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.next=3;return getMovie(input);case 3:setInput('');case 4:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();useEffect(function(){function fetchMovies(){return _fetchMovies.apply(this,arguments);}function _fetchMovies(){_fetchMovies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAllMovies();case 2:setIsLoading(false);case 3:case\"end\":return _context2.stop();}},_callee2);}));return _fetchMovies.apply(this,arguments);}fetchMovies();},[isLoading]);return/*#__PURE__*/_jsxs(\"div\",{className:adminPageClasses.container,children:[/*#__PURE__*/_jsx(\"h1\",{className:adminPageClasses.heading,children:\"Movie Selection\"}),/*#__PURE__*/_jsx(\"p\",{className:adminPageClasses.addMovie,children:\"Add a New Movie\"}),/*#__PURE__*/_jsx(\"input\",{className:adminPageClasses.input,type:\"text\",value:input,onChange:handleInputChange,onKeyDown:function onKeyDown(e){e.key==='Enter'&&handleSubmit();}}),/*#__PURE__*/_jsx(\"h4\",{className:adminPageClasses.movieHeader,children:\"Current movies:\"}),/*#__PURE__*/_jsx(\"div\",{className:adminPageClasses.moviesContainer,children:movies.map(function(movie,i){{return movie?/*#__PURE__*/_jsx(Loaded,{movie:movie},i):/*#__PURE__*/_jsx(Loading,{});}})})]});}var Loaded=function Loaded(_ref3){var movie=_ref3.movie;var _useController2=useController(),deleteMovie=_useController2.deleteMovie;var handleDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:event.preventDefault();deleteMovie(movie._id);case 2:case\"end\":return _context3.stop();}},_callee3);}));return function handleDelete(_x){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:adminPageClasses.moviesContainer2,style:{width:'400px'},children:[/*#__PURE__*/_jsx(\"div\",{className:adminPageClasses.delete,children:/*#__PURE__*/_jsx(\"span\",{className:\"cursor-pointer\",onClick:handleDelete,children:\"\\u2715\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\".concat(movie.title),className:adminPageClasses.link,children:/*#__PURE__*/_jsx(\"img\",{className:adminPageClasses.image,src:movie.poster,alt:movie.title})}),/*#__PURE__*/_jsx(\"div\",{className:adminPageClasses.infoContainer,children:/*#__PURE__*/_jsxs(\"div\",{className:adminPageClasses.infoContainer2,children:[/*#__PURE__*/_jsx(\"p\",{className:adminPageClasses.title,children:movie.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"(\",movie.rating,\")\"]})]})})]});};var Loading=function Loading(){return/*#__PURE__*/_jsx(_Fragment,{});};","map":{"version":3,"names":["useController","useState","useEffect","Link","adminPageClasses","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminPage","_ref","_objectDestructuringEmpty","_useController","getMovie","getAllMovies","movies","_useState","_useState2","_slicedToArray","input","setInput","_useState3","_useState4","isLoading","setIsLoading","handleInputChange","event","target","value","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","apply","arguments","fetchMovies","_fetchMovies","_callee2","_callee2$","_context2","className","container","children","heading","addMovie","type","onChange","onKeyDown","e","key","movieHeader","moviesContainer","map","movie","i","Loaded","Loading","_ref3","_useController2","deleteMovie","handleDelete","_ref4","_callee3","_callee3$","_context3","preventDefault","_id","_x","moviesContainer2","style","width","delete","onClick","to","concat","title","link","image","src","poster","alt","infoContainer","infoContainer2","rating"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/pages/AdminPage/AdminPage.jsx"],"sourcesContent":["import { useController } from '../../Controller'\nimport { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport adminPageClasses from './adminPageClasses'\n\nexport default function AdminPage({}) {\n  const { getMovie, getAllMovies, movies } = useController()\n  const [input, setInput] = useState('')\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  const handleInputChange = (event) => {\n    setInput(event.target.value)\n  }\n\n  const handleSubmit = async () => {\n    setIsLoading(true)\n    await getMovie(input)\n    setInput('')\n  }\n\n  useEffect(() => {\n    async function fetchMovies() {\n      await getAllMovies()\n      setIsLoading(false)\n    }\n    fetchMovies()\n  }, [isLoading])\n\n  return (\n    <div className={adminPageClasses.container}>\n      <h1 className={adminPageClasses.heading}>Movie Selection</h1>\n      <p className={adminPageClasses.addMovie}>Add a New Movie</p>\n      <input\n        className={adminPageClasses.input}\n        type=\"text\"\n        value={input}\n        onChange={handleInputChange}\n        onKeyDown={(e) => {\n          e.key === 'Enter' && handleSubmit()\n        }}\n      />\n      <h4 className={adminPageClasses.movieHeader}>Current movies:</h4>\n      <div className={adminPageClasses.moviesContainer}>\n        {movies.map((movie, i) => {\n          {\n            return movie ? <Loaded movie={movie} key={i} /> : <Loading />\n          }\n        })}\n      </div>\n    </div>\n  )\n}\n\nconst Loaded = ({ movie }) => {\n  const { deleteMovie } = useController()\n\n  const handleDelete = async (event) => {\n    event.preventDefault()\n    deleteMovie(movie._id)\n  }\n\n  return (\n    <div\n      className={adminPageClasses.moviesContainer2}\n      style={{ width: '400px' }}\n    >\n      <div className={adminPageClasses.delete}>\n        <span className=\"cursor-pointer\" onClick={handleDelete}>\n          &#10005;\n        </span>\n      </div>\n      <Link to={`/${movie.title}`} className={adminPageClasses.link}>\n        <img\n          className={adminPageClasses.image}\n          src={movie.poster}\n          alt={movie.title}\n        />\n      </Link>\n      <div className={adminPageClasses.infoContainer}>\n        <div className={adminPageClasses.infoContainer2}>\n          <p className={adminPageClasses.title}>{movie.title}</p>\n          <p>({movie.rating})</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Loading = () => {\n  return <></>\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}