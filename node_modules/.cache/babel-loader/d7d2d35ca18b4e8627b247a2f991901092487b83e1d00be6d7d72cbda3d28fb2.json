{"ast":null,"code":"import * as usersAPI from './userspi';\nexport async function signUp(userData) {\n  const {\n    token\n  } = await usersAPI.signUp(userData);\n  localStorage.setItem('token', token);\n  return getUser();\n}\nexport async function login(credentials) {\n  const {\n    token\n  } = await usersAPI.login(credentials);\n  localStorage.setItem('token', token);\n  return getUser();\n}\nexport function getToken() {\n  const token = localStorage.getItem('token');\n  if (!token) return null;\n  const payload = JSON.parse(atob(token.split('.')[1]));\n  if (payload.exp < Date.now() / 1000) {\n    localStorage.removeItem('token');\n    return null;\n  }\n  return token;\n}\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\nexport function logOut() {\n  localStorage.removeItem('token');\n}","map":{"version":3,"names":["usersAPI","signUp","userData","token","localStorage","setItem","getUser","login","credentials","getToken","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","user","logOut"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/services/usersService.js"],"sourcesContent":["import * as usersAPI from './userspi'\n\nexport async function signUp(userData) {\n  const { token } = await usersAPI.signUp(userData)\n  localStorage.setItem('token', token)\n  return getUser()\n}\n\nexport async function login(credentials) {\n  const { token } = await usersAPI.login(credentials)\n  localStorage.setItem('token', token)\n  return getUser()\n}\n\nexport function getToken() {\n  const token = localStorage.getItem('token')\n  if (!token) return null\n  const payload = JSON.parse(atob(token.split('.')[1]))\n  if (payload.exp < Date.now() / 1000) {\n    localStorage.removeItem('token')\n    return null\n  }\n  return token\n}\n\nexport function getUser() {\n  const token = getToken()\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null\n}\n\nexport function logOut() {\n  localStorage.removeItem('token')\n}\n"],"mappings":"AAAA,OAAO,KAAKA,QAAQ,MAAM,WAAW;AAErC,OAAO,eAAeC,MAAMA,CAACC,QAAQ,EAAE;EACrC,MAAM;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC;EACjDE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;EACpC,OAAOG,OAAO,EAAE;AAClB;AAEA,OAAO,eAAeC,KAAKA,CAACC,WAAW,EAAE;EACvC,MAAM;IAAEL;EAAM,CAAC,GAAG,MAAMH,QAAQ,CAACO,KAAK,CAACC,WAAW,CAAC;EACnDJ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;EACpC,OAAOG,OAAO,EAAE;AAClB;AAEA,OAAO,SAASG,QAAQA,CAAA,EAAG;EACzB,MAAMN,KAAK,GAAGC,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACP,KAAK,EAAE,OAAO,IAAI;EACvB,MAAMQ,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACX,KAAK,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrD,IAAIJ,OAAO,CAACK,GAAG,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAE;IACnCd,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;IAChC,OAAO,IAAI;EACb;EACA,OAAOhB,KAAK;AACd;AAEA,OAAO,SAASG,OAAOA,CAAA,EAAG;EACxB,MAAMH,KAAK,GAAGM,QAAQ,EAAE;EACxB,OAAON,KAAK,GAAGS,IAAI,CAACC,KAAK,CAACC,IAAI,CAACX,KAAK,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,IAAI,GAAG,IAAI;AAClE;AAEA,OAAO,SAASC,MAAMA,CAAA,EAAG;EACvBjB,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;AAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}