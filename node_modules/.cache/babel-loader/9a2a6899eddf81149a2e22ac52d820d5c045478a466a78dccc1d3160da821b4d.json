{"ast":null,"code":"import _regeneratorRuntime from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useController}from'../../Controller';import reviewFormClasses from'./reviewFormClasses';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ReviewForm(_ref){var movie=_ref.movie,user=_ref.user;var _useController=useController(),createReview=_useController.createReview;var _useState=useState({body:'',author:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];function handleChange(evt){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},evt.target.name,evt.target.value)));}var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.prev=1;_context.next=4;return createReview(formData,movie.imdbID,user);case 4:setFormData({body:'',author:''});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setError('Editing Failed - Try Again');case 10:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",onSubmit:handleSubmit,className:reviewFormClasses.form,children:[/*#__PURE__*/_jsxs(\"div\",{className:reviewFormClasses.section,children:[/*#__PURE__*/_jsx(\"label\",{className:reviewFormClasses.label,htmlFor:\"body\",children:\"Create Review\"}),/*#__PURE__*/_jsx(\"textarea\",{className:reviewFormClasses.input,rows:\"5\",cols:\"100\",name:\"body\",value:formData.body,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:reviewFormClasses.section,children:[/*#__PURE__*/_jsx(\"label\",{className:reviewFormClasses.label,htmlFor:\"author\",children:\"Author\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:reviewFormClasses.input,name:\"author\",value:formData.author,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"p\",{className:reviewFormClasses.error,children:error}),/*#__PURE__*/_jsx(\"button\",{className:reviewFormClasses.button,type:\"submit\",children:\"Submit\"})]})});}","map":{"version":3,"names":["useState","useController","reviewFormClasses","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ReviewForm","_ref","movie","user","_useController","createReview","_useState","body","author","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","error","setError","handleChange","evt","_objectSpread","_defineProperty","target","name","value","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","preventDefault","imdbID","t0","stop","_x","apply","arguments","children","autoComplete","onSubmit","className","form","section","label","htmlFor","input","rows","cols","onChange","type","button"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/components/ReviewForm/ReviewForm.jsx"],"sourcesContent":["import { useState } from 'react'\nimport { useController } from '../../Controller'\n\nimport reviewFormClasses from './reviewFormClasses'\n\nexport default function ReviewForm({ movie, user }) {\n  const { createReview } = useController()\n  const [formData, setFormData] = useState({\n    body: '',\n    author: '',\n  })\n\n  const [error, setError] = useState('')\n\n  function handleChange(evt) {\n    setFormData({ ...formData, [evt.target.name]: evt.target.value })\n  }\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault()\n    try {\n      await createReview(formData, movie.imdbID, user)\n      setFormData({\n        body: '',\n        author: '',\n      })\n    } catch {\n      setError('Editing Failed - Try Again')\n    }\n  }\n\n  return (\n    <>\n      <form\n        autoComplete=\"off\"\n        onSubmit={handleSubmit}\n        className={reviewFormClasses.form}\n      >\n        <div className={reviewFormClasses.section}>\n          <label className={reviewFormClasses.label} htmlFor=\"body\">\n            Create Review\n          </label>\n          <textarea\n            className={reviewFormClasses.input}\n            rows=\"5\"\n            cols=\"100\"\n            name=\"body\"\n            value={formData.body}\n            onChange={handleChange}\n          />\n        </div>\n        <div className={reviewFormClasses.section}>\n          <label className={reviewFormClasses.label} htmlFor=\"author\">\n            Author\n          </label>\n          <input\n            type=\"text\"\n            className={reviewFormClasses.input}\n            name=\"author\"\n            value={formData.author}\n            onChange={handleChange}\n          />\n        </div>\n        <p className={reviewFormClasses.error}>{error}</p>\n        <button className={reviewFormClasses.button} type=\"submit\">\n          Submit\n        </button>\n      </form>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}