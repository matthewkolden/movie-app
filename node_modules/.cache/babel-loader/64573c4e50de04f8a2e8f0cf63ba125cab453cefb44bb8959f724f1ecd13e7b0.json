{"ast":null,"code":"import _regeneratorRuntime from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/matthew/Developer/ga/unit_3/projects/movie-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getToken}from'./usersService';export default function sendRequest(_x){return _sendRequest.apply(this,arguments);}function _sendRequest(){_sendRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,payload,options,token,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';payload=_args.length>2&&_args[2]!==undefined?_args[2]:null;options={method:method};if(payload){options.headers={'Content-Type':'application/json'};options.body=JSON.stringify(payload);}token=getToken();if(token){// Ensure headers object exists\noptions.headers=options.headers||{};options.headers.Authorization=\"Bearer \".concat(token);}_context.next=8;return fetch(url,options);case 8:res=_context.sent;if(!res.ok){_context.next=11;break;}return _context.abrupt(\"return\",res.json());case 11:throw new Error('Bad Request');case 12:case\"end\":return _context.stop();}},_callee);}));return _sendRequest.apply(this,arguments);}","map":{"version":3,"names":["getToken","sendRequest","_x","_sendRequest","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","method","payload","options","token","res","_args","wrap","_callee$","_context","prev","next","length","undefined","headers","body","JSON","stringify","Authorization","concat","fetch","sent","ok","abrupt","json","Error","stop"],"sources":["/home/matthew/Developer/ga/unit_3/projects/movie-app/src/services/sendRequest.js"],"sourcesContent":["import { getToken } from './usersService'\n\nexport default async function sendRequest(url, method = 'GET', payload = null) {\n  const options = { method }\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' }\n    options.body = JSON.stringify(payload)\n  }\n  const token = getToken()\n  if (token) {\n    // Ensure headers object exists\n    options.headers = options.headers || {}\n    options.headers.Authorization = `Bearer ${token}`\n  }\n  const res = await fetch(url, options)\n  if (res.ok) return res.json()\n  throw new Error('Bad Request')\n}\n"],"mappings":"oSAAA,OAASA,QAAQ,KAAQ,gBAAgB,CAEzC,uBAA8B,CAAAC,WAAWA,CAAAC,EAAA,SAAAC,YAAA,CAAAC,KAAA,MAAAC,SAAA,GAexC,SAAAF,aAAA,EAAAA,YAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAfc,SAAAC,QAA2BC,GAAG,MAAAC,MAAA,CAAAC,OAAA,CAAAC,OAAA,CAAAC,KAAA,CAAAC,GAAA,CAAAC,KAAA,CAAAX,SAAA,QAAAE,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAEV,MAAM,CAAAK,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,KAAK,CAAEJ,OAAO,CAAAI,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,IAAI,CACrEH,OAAO,CAAG,CAAEF,MAAM,CAANA,MAAO,CAAC,CAC1B,GAAIC,OAAO,CAAE,CACXC,OAAO,CAACW,OAAO,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CACxDX,OAAO,CAACY,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACf,OAAO,CAAC,CACxC,CACME,KAAK,CAAGd,QAAQ,EAAE,CACxB,GAAIc,KAAK,CAAE,CACT;AACAD,OAAO,CAACW,OAAO,CAAGX,OAAO,CAACW,OAAO,EAAI,CAAC,CAAC,CACvCX,OAAO,CAACW,OAAO,CAACI,aAAa,WAAAC,MAAA,CAAaf,KAAK,CAAE,CACnD,CAACK,QAAA,CAAAE,IAAA,SACiB,CAAAS,KAAK,CAACpB,GAAG,CAAEG,OAAO,CAAC,QAA/BE,GAAG,CAAAI,QAAA,CAAAY,IAAA,KACLhB,GAAG,CAACiB,EAAE,EAAAb,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAc,MAAA,UAASlB,GAAG,CAACmB,IAAI,EAAE,eACvB,IAAI,CAAAC,KAAK,CAAC,aAAa,CAAC,0BAAAhB,QAAA,CAAAiB,IAAA,MAAA3B,OAAA,GAC/B,UAAAN,YAAA,CAAAC,KAAA,MAAAC,SAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}